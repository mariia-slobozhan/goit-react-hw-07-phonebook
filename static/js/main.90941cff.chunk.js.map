{"version":3,"sources":["Components/PhonebookForm/PhonebookForm.module.css","Components/ContactItem/ContactItem.module.css","Components/Filter/Filter.module.css","redux/contacts/contactsSlice.js","redux/contacts/contacts-actions.js","redux/contacts/contacts-reducer.js","redux/store.js","Components/PhonebookForm/PhonebookForm.js","redux/contacts/contacts-selectors.js","Components/ContactItem/ContactItem.js","Components/ContactsList/ContactsList.js","Components/Filter/Filter.js","services/contacts-api.js","redux/contacts/contacts-operations.js","App.js","index.js"],"names":["module","exports","contactsApi","createApi","reducerPath","baseQuery","fetchBaseQuery","baseUrl","tagTypes","endpoints","builder","getContacts","query","providesTags","addContact","mutation","newContact","url","method","body","invalidatesTags","deleteContact","contactId","useGetContactsQuery","useAddContactMutation","useDeleteContactMutation","changeFilter","createAction","filter","createReducer","_","payload","combineReducers","store","configureStore","reducer","middleware","getDefaultMiddleware","concat","setupListeners","dispatch","PhonebookForm","useState","name","setName","phone","setPhone","data","isLoading","handleChange","e","target","value","resetForm","onSubmit","preventDefault","normalizedContact","toLowerCase","some","item","toast","error","className","s","label","input","type","pattern","title","required","onChange","disabled","button","filterValue","state","ContactItem","contact","isDeleting","id","tel","onClick","ContactList","contacts","setContacts","useSelector","useEffect","normalizedFilter","includes","map","Filter","useDispatch","fetchContacts","a","axios","get","post","delete","defaults","baseURL","createAsyncThunk","contactsAPI","deletedContact","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.90941cff.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"label\":\"PhonebookForm_label__3U3R5\",\"input\":\"PhonebookForm_input__2dnQi\",\"button\":\"PhonebookForm_button__PgsGL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"ContactItem_item__3cRiV\",\"name\":\"ContactItem_name__11JdY\",\"tel\":\"ContactItem_tel__20zKS\",\"button\":\"ContactItem_button___CVa9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"label\":\"Filter_label__3Ytmd\",\"input\":\"Filter_input__3Lzmv\"};","import { createApi, fetchBaseQuery } from \"@reduxjs/toolkit/query/react\";\n\nexport const contactsApi = createApi({\n  reducerPath: \"contactsApi\",\n  baseQuery: fetchBaseQuery({\n    baseUrl: \"https://61981ad0164fa60017c22f69.mockapi.io/api/v1\",\n  }),\n  tagTypes: [\"Contacts\"],\n  endpoints: (builder) => ({\n    getContacts: builder.query({\n      query: () => \"/contacts\",\n      providesTags: [\"Contacts\"],\n    }),\n    addContact: builder.mutation({\n      query: (newContact) => ({\n        url: \"/contacts\",\n        method: \"POST\",\n        body: newContact,\n      }),\n      invalidatesTags: [\"Contacts\"],\n    }),\n    deleteContact: builder.mutation({\n      query: (contactId) => ({\n        url: `/contacts/${contactId}`,\n        method: \"DELETE\",\n      }),\n      invalidatesTags: [\"Contacts\"],\n    }),\n  }),\n});\n\nexport const {\n  useGetContactsQuery,\n  useAddContactMutation,\n  useDeleteContactMutation,\n} = contactsApi;\n","import { createAction } from \"@reduxjs/toolkit\";\n\nexport const changeFilter = createAction(\"contacts/changeFilter\");\n","import { combineReducers } from \"redux\";\nimport { createReducer } from \"@reduxjs/toolkit\";\nimport { changeFilter } from \"./contacts-actions\";\n\nconst filter = createReducer(\"\", {\n  [changeFilter]: (_, { payload }) => payload,\n});\n\nexport default combineReducers({\n  filter,\n});\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport { setupListeners } from \"@reduxjs/toolkit/query\";\n// import { combineReducers } from \"redux\";\nimport { contactsApi } from \"./contacts/contactsSlice\";\nimport filter from \"./contacts/contacts-reducer\";\n\n// const phoneBook = combineReducers({\n//   [contactsApi.reducerPath]: contactsApi.reducer,\n//   filter: filter,\n// })\n\n// const store = configureStore({\n//   reducer: {\n//     contacts: contactsReducer,\n//   },\n//   devTools: process.env.NODE_ENV === \"development\",\n//   middleware: (getDefaultMiddleware) => getDefaultMiddleware().concat(logger),\n// });\n\n// export default store;\n\nconst store = configureStore({\n  reducer: {\n    [contactsApi.reducerPath]: contactsApi.reducer,\n    filterValue: filter,\n  },\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware().concat(contactsApi.middleware),\n});\n\nsetupListeners(store.dispatch);\n\nexport default store;\n","import { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { toast } from \"react-toastify\";\nimport s from \"./PhonebookForm.module.css\";\nimport {\n  useGetContactsQuery,\n  useAddContactMutation,\n} from \"redux/contacts/contactsSlice\";\n\nexport default function PhonebookForm() {\n  const [name, setName] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n\n  const { data } = useGetContactsQuery();\n  const [addContact, { isLoading }] = useAddContactMutation();\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    switch (name) {\n      case \"name\":\n        setName(value);\n        break;\n      case \"phone\":\n        setPhone(value);\n        break;\n      default:\n        return;\n    }\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const normalizedContact = name.toLowerCase();\n    if (data.some((item) => item.name.toLowerCase() === normalizedContact)) {\n      toast.error(`${name} is already in contact list`);\n      return;\n    }\n    addContact({ name, phone });\n    resetForm();\n  };\n\n  const resetForm = () => {\n    setName(\"\");\n    setPhone(\"\");\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <label className={s.label}>\n        Name\n        <input\n          className={s.input}\n          type=\"text\"\n          name=\"name\"\n          pattern=\"^[a-zA-Zа-яА-Я]+(([' -][a-zA-Zа-яА-Я ])?[a-zA-Zа-яА-Я]*)*$\"\n          title=\"Имя может состоять только из букв, апострофа, тире и пробелов. Например Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan и т. п.\"\n          required\n          onChange={handleChange}\n          value={name}\n        />\n      </label>\n      <label className={s.label}>\n        Phone number\n        <input\n          className={s.input}\n          type=\"tel\"\n          name=\"phone\"\n          pattern=\"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}\"\n          title=\"Номер телефона должен состоять цифр и может содержать пробелы, тире, круглые скобки и может начинаться с +\"\n          required\n          onChange={handleChange}\n          value={phone}\n        />\n      </label>\n      <button disabled={isLoading} className={s.button} type=\"submit\">\n        Add contact\n      </button>\n    </form>\n  );\n}\n\nPhonebookForm.propTypes = {\n  addContact: PropTypes.func,\n};\n","export const filterValue = (state) => state.filterValue.filter;\n","import React from \"react\";\nimport { useDeleteContactMutation } from \"redux/contacts/contactsSlice\";\nimport PropTypes from \"prop-types\";\nimport s from \"./ContactItem.module.css\";\n\nexport default function ContactItem({ contact }) {\n  const [deleteContact, { isLoading: isDeleting }] = useDeleteContactMutation();\n\n  return (\n    <li className={s.item} id={contact.id}>\n      <span className={s.name}>{contact.name}</span>\n      <span className={s.tel}>{contact.phone}</span>\n      <button\n        className={s.button}\n        onClick={() => deleteContact(contact.id)}\n        type=\"button\"\n      >\n        {isDeleting ? \"Deleting...\" : \"Delete\"}\n      </button>\n    </li>\n  );\n}\n\nContactItem.propTypes = {\n  contact: PropTypes.object,\n  deleteContact: PropTypes.func,\n};\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useState, useEffect } from \"react\";\nimport { filterValue } from \"redux/contacts/contacts-selectors\";\nimport { useGetContactsQuery } from \"redux/contacts/contactsSlice\";\nimport ContactItem from \"../ContactItem/ContactItem\";\n\nexport default function ContactList() {\n  const [contacts, setContacts] = useState([]);\n  const { data, error, isLoading } = useGetContactsQuery();\n  const value = useSelector(filterValue);\n\n  useEffect(() => {\n    const normalizedFilter = value.toLowerCase();\n    try {\n      setContacts(\n        data.filter(({ name }) => name.toLowerCase().includes(normalizedFilter))\n      );\n    } catch (error) {\n      return error;\n    }\n  }, [data, value]);\n\n  return (\n    <ul>\n      {contacts.map((item) => (\n        <ContactItem key={item.id} contact={item} />\n      ))}\n\n      {error && <h2>There are not any contacts in your Phonebook</h2>}\n      {isLoading && <h2>Loading...</h2>}\n    </ul>\n  );\n}\n","import PropTypes from \"prop-types\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { filterValue } from \"redux/contacts/contacts-selectors\";\nimport { changeFilter } from \"redux/contacts/contacts-actions\";\nimport s from \"./Filter.module.css\";\n\nexport default function Filter() {\n  const value = useSelector(filterValue);\n  const dispatch = useDispatch();\n  const onChange = (e) => dispatch(changeFilter(e.target.value));\n\n  return (\n    <label className={s.label}>\n      Find contacts by name\n      <input\n        className={s.input}\n        type=\"text\"\n        value={value}\n        onChange={onChange}\n      />\n    </label>\n  );\n}\n// const mapStateToProps = (state) => ({\n//   value: state.contacts.filter\n\n// })\n\n// const mapDispatchToProps = dispatch => ({\n//   onChange: e => dispatch(changeFilter(e.target.value))\n// })\n\n// export default connect(mapStateToProps, mapDispatchToProps)(Filter)\n\nFilter.propTypes = {\n  value: PropTypes.string,\n  onChange: PropTypes.func,\n};\n","import axios from \"axios\";\n\naxios.defaults.baseURL = \"https://61981ad0164fa60017c22f69.mockapi.io/api/v1\";\n\nexport async function fetchContacts() {\n  const { data } = await axios.get(\"/contacts\");\n  return data;\n}\n\nexport async function addContact(contact) {\n  const { data } = await axios.post(\"/contacts\", contact);\n  return data;\n}\n\nexport async function deleteContact(id) {\n  const { data } = await axios.delete(`/contacts/${id}`);\n  return data.id;\n}\n","import { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport * as contactsAPI from \"services/contacts-api\";\n\nexport const fetchContacts = createAsyncThunk(\n  \"contscts/fetchContacts\",\n  async () => {\n    const contacts = await contactsAPI.fetchContacts();\n    return contacts;\n  }\n);\n\nexport const addContact = createAsyncThunk(\n  \"contscts/addContact\",\n  async (contact) => {\n    const addContact = await contactsAPI.addContact(contact);\n    return addContact;\n  }\n);\n\nexport const deleteContact = createAsyncThunk(\n  \"contscts/deleteContact\",\n  async (id) => {\n    const deletedContact = await contactsAPI.deleteContact(id);\n    return deletedContact;\n  }\n);\n","import \"./App.css\";\nimport { useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { ToastContainer } from \"react-toastify\";\nimport \"../node_modules/react-toastify/dist/ReactToastify.css\";\nimport PhonebookForm from \"./Components/PhonebookForm/PhonebookForm\";\nimport ContactList from \"./Components/ContactsList/ContactsList\";\nimport Filter from \"./Components/Filter/Filter\";\nimport { fetchContacts } from \"redux/contacts/contacts-operations\";\n\nexport default function App() {\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(fetchContacts());\n  }, [dispatch]);\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <ToastContainer />\n      <PhonebookForm />\n      <h2>Contacts</h2>\n      <Filter />\n      <ContactList />\n    </div>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport store from \"./redux/store\";\nimport { Provider } from \"react-redux\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}